<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="http://natjohan.info/theme/css/style.css">
	<!--<link rel="stylesheet/less" type="text/css" href="/theme/css/style.less">-->
	<!--<script src="/theme/js/less.js" type="text/javascript"></script>-->
	<link rel="stylesheet" type="text/css" href="http://natjohan.info/theme/css/pygments.css">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://natjohan.info/theme/css/font-awesome.css" type="text/css"/>

	<link href="http://natjohan.info/" type="application/atom+xml" rel="alternate" title="Natjohan ATOM Feed" />

		<title> EncFS : simply protect and access to your private data on cloud services | Natjohan </title>
		<meta charset="utf-8" />
</head>
<body>
	<section id="sidebar">
		<figure id="user_logo">
            <a href="http://natjohan.info"><div class="logo">&nbsp;</div></a>
		</figure>

		<div class="user_meta">
            <h1 id="user"><a href="http://natjohan.info" class="">Natjohan</a></h1>
			<h2>just some notes</h2>
			<ul>
						<li><a href="http://natjohan.info/category/dev.html">Dev</a></li>
						<li class="active"><a href="http://natjohan.info/category/linux.html">Linux</a></li>
						<li><a href="http://natjohan.info/category/totw.html">ToTW</a></li>
					<li><a href="/pages/about.html">About</a></li>
			</ul>
		</div>
		<footer>
			<div id="social" style="font-size: 20px;">
				  <script language="JavaScript">
				    u = "tcatnoc";
				    s = "ofni.nahojtan";
				    r_address = s + '@' + u
				    document.write('<a href=\"mailto:' + r_address.split("").reverse().join("") + '\" target=\"_blank\">');
				  </script>
				  <i class="icon-envelope icon-large"></i>
				  </a>
				  <a href="http://twitter.com/natjohan" target="_blank"> <i class="icon-twitter-sign icon-large"> </i> </a>
				  <a href="https://github.com/natjohan" target="_blank">  <i class="icon-github-sign icon-large"></i> </a>
  
				  <a href="http://www.flickr.com/photos/joanhant/" target="_blank">  <i class="icon-camera icon-large"></i> </a>
				  <a href="http://natjohan.info/feeds/all.rss.xml" rel="alternate" title="Recent Blog Posts"> <i class="icon-rss icon-large"></i> </a>
			</div>
			<br>
			<address>
				Powered by <a href="http://pelican.notmyidea.org/">Pelican</a>,
		                theme by <a href="https://github.com/wting/pelican-svbtle">wting</a>.
			</address>
		</footer>
	</section>

	<section id="posts">
	<header>
		<h1>natjohan's blog</h1>
		<h3>Posted lun. 08 f√©vrier 2016</h3>
	</header>
	<article>
		<h1 id="title">
			<a href="http://natjohan.info/encfs-simply-protect-and-access-to-your-private-data-on-cloud-services.html" rel="bookmark"
				title="Permalink to EncFS : simply protect and access to your private data on cloud services">EncFS : simply protect and access to your private data on cloud services</a>
		</h1>
		<img alt="" src="/images/Encfs-global.png" />
<div class="section" id="edit">
<h2>Edit</h2>
<p>First, I published this article three years ago, in 2013. As things moving fast, specially in security, Sebastian Messmer just
advised me that <cite>EncFS</cite> is not a really secure tool anymore to save files on Dropbox. In February 2014, Taylor Hornby a scientist and security researcher done an audit of the EncFS code, and bad news :</p>
<!--  -->
<blockquote>
<em>EncFS is probably safe as long as the adversary only gets one copy of
the ciphertext and nothing more. EncFS is not safe if the adversary
has the opportunity to see two or more snapshots of the ciphertext at
different times. EncFS attempts to protect files from malicious
modification, but there are serious problems with this feature.</em></blockquote>
<p>You can find the whole audit <a class="reference external" href="https://defuse.ca/audits/encfs.htm">online</a> .
That mean <cite>EncFS</cite> is not a good way to secure your Dropbox, as it saves many snapshots of your files. Since this audit, several
versions were released : <a class="reference external" href="https://github.com/vgough/encfs/releases">https://github.com/vgough/encfs/releases</a> , but unfortunately, all issues are not fixed <a class="reference external" href="https://github.com/vgough/encfs/issues/9">yet</a>. So Sebastian built his own crypto tool named Cryfs, it alreadydo the job, even if it's not user-friendly and cross platform yet, but that's a young tool. You can find a comparison of the market : <a class="reference external" href="https://www.cryfs.org/comparison">https://www.cryfs.org/comparison</a> and if you're interested in crypto, you can also read the Sebastian's <a class="reference external" href="https://www.cryfs.org/cryfs_mathesis.pdf">thesis</a> about cryfs.</p>
<p><strong>Lesson learned :</strong> don't use the current encfs (1.8) version to protect your files on Dropbox, Open Source allows users to edit the code freely and thus increase the level of security for users of this code.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis</h2>
<p>Nowadays, there is many cloud storage services (Dropbox, Bitcasa, Box, Hubic, Mega, Drive, Sparkleshare, etc) to sync/backup/share/copy your data. Thanks to it, you can prevent hard drive crash or access it from different devices.</p>
<p>Use a third-parties cloud providers mean you have to trust them and there is <strong>few questions</strong> :</p>
<div class="line-block">
<div class="line">Do you want to put your <strong>private</strong> data in da cloud ?</div>
<div class="line">Have you ever read <strong>termes of use</strong> for this services ? (Are you sure ?!)</div>
<div class="line">How does the service provide <strong>authentication</strong> ?</div>
<div class="line">Which technology protect your data ? Is there an <strong>encryption</strong> system (in transit and storage) ?</div>
<div class="line">What will happen to your data if you decide to <strong>close your account</strong> ?</div>
<div class="line">Are there <strong>penalties</strong> ($) for unwanted access to your data ?</div>
<div class="line">Is it <strong>vulnerable</strong> to security breaches ?</div>
</div>
<p>If you hesitate or can't answer at one or more question, you have to consider to use EncFS to <strong>add a new layer of security for your private data</strong>. Moreover, according to the Fraunhofer institut report about cloud services (see <cite>Go further</cite> links) :</p>
<p><em>The results of the cloud storage provider analysis made clear that most, but not all, cloud storage providers offer built-in methods to encrypt the data to be stored in the cloud. However, the encryption schemes are sometimes not sufficient, as some storage providers encrypt data by using an encryption key generated by and stored at the provider. This means that users cannot be sure wether the storage provider also uses the key to decrypt their data, access the contents and possibly pass it on
to third-parties. Even worse, some cloud storage providers do not encrypt data at all.</em></p>
</div>
<div class="section" id="encfs-in-a-nutshell">
<h2>EncFS in a nutshell</h2>
<p>EncFS is an encrypted virtual filesystem which provides a local directory based encryption. It works with <a class="reference external" href="http://en.wikipedia.org/wiki/Filesystem_in_Userspace">FUSE</a> which mean : you don't have to get any privilege to make it works and you can access it through your filesystem (because EncFS is a virtual filesystem : VFS).</p>
<div class="section" id="encrypt-settings">
<h3>Encrypt Settings</h3>
<p>In <cite>paranoia</cite> mode:</p>
<blockquote>
<div class="line-block">
<div class="line">Cipher: AES</div>
<div class="line">Key Size: 256 bits</div>
<div class="line">PBKDF2 with 3 second runtime, 160 bit salt</div>
<div class="line">Filesystem Block Size: 1024 bytes</div>
<div class="line">Filename Encoding: Block encoding with IV chaining</div>
<div class="line">Unique initialization vector file headers</div>
<div class="line">Message Authentication Code block headers</div>
<div class="line">External IV Chaining</div>
</div>
</blockquote>
<!-- Note : you should read `disadvantages section <http://www.arg0.net/encfsintro>`_ on the official website -->
</div>
<div class="section" id="why-encfs">
<h3>Why EncFS ?</h3>
<p>EncFS offer a <strong>good level of protection for personal use</strong> (see above)</p>
<p>EncFS is <strong>simple to use</strong></p>
<p>EncFS encrypt one file at a time, and not on an entire block device (like TrueCrypt) and it's very cool for cloud storage, because you just update your modified files. Moreover you don't have to define a size for your encrypted folder</p>
<p>EncFS can works on many OS and there is GUI (see below)</p>
</div>
</div>
<div class="section" id="linux">
<h2>Linux</h2>
<div class="section" id="installation">
<h3>Installation</h3>
<p>On Fedora (there is also a debian or freebsd <a class="reference external" href="http://www.arg0.net/encfs">packages</a>) :</p>
<div class="highlight"><pre><span class="go">natjohan# yum install fuse-encfs</span>
</pre></div>
</div>
<div class="section" id="usage">
<h3>Usage</h3>
<div class="section" id="from-command-line">
<h4>From command line</h4>
<p>You can use Encfs from the command line, the following command create an encrypted folder where your data will be stored and a folder and an other folder for your decrypted data :</p>
<div class="highlight"><pre><span class="go">natjohan $ encfs /home/.myencryptedfolder /home/mydecryptedfoler</span>
</pre></div>
<p>Then follow the instructions (select p for paranoia mode, choose a very strong password and of course, don't forget it ;)</p>
<p>You can verify with :</p>
<div class="highlight"><pre><span class="go">natjohan $ cat /proc/mounts</span>
<span class="go"> encfs /home/mydecryptedfoler fuse rw,nosuid,nodev,user_id=1000,group_id=1000,default_permissions 0 0</span>
</pre></div>
<p>You should see an encfs line.</p>
<p>So, to use EncFS and show/put your data in your <cite>mydecryptedfoler</cite> you just have to recall :</p>
<div class="highlight"><pre><span class="go">natjohan $ encfs /home/.myencryptedfolder /home/mydecryptedfoler</span>
</pre></div>
<p>Each data in this folder will be encrypted in your <cite>.myencryptedfolder</cite>.</p>
<p>To umount the folder :</p>
<div class="highlight"><pre><span class="go">natjohan $ fusermount -u /home/mydecryptedfolder</span>
</pre></div>
<p>To change your password :</p>
<div class="highlight"><pre><span class="go">natjohan $ encfsctl passwd /home/.myencryptedfolder</span>
</pre></div>
<!-- /!\\ Note : **Don't remove /.myencryptedfolder/.encfs6.xml file and save it**,  without this file you can't decrypt your data ! **Make sure you remember the password too**, because there is no way to recover your data if you forget the password ! -->
</div>
<div class="section" id="with-a-gui">
<h4>≈¥ith a GUI</h4>
<p>There is also a GUI for Encfs called <a class="reference external" href="http://tom.noflag.org.uk/cryptkeeper.html">CryptKeeper</a>, you can build it from source or on Fedora :</p>
<div class="highlight"><pre><span class="go">natjohan# yum install cryptkeeper</span>
</pre></div>
<p>CryptKeeper offer a simple GUI thanks to a system tray applet, you can mount/umount or create encrypted folders.</p>
<img alt="" src="/images/CryptKeeper.png" />
<p>There is also some options (with a right clic on the icon). So, the content of your encrypted folder should looks like this :</p>
<img alt="" src="/images/Enc-content.png" />
</div>
</div>
</div>
<div class="section" id="android">
<h2>Android</h2>
<p>&quot;Ok, Encfs is pretty cool, but if I want to access to my data on my android device ?!&quot;
There is several android apps for decrypt Encfs folder, but CloudFetch is my favorite, you can decrypt local folder or directly link it with Dropbox, SpiderOak, SparkleShare and Ubuntu One (for the moment). Download it via Google play <a class="reference external" href="https://play.google.com/store/apps/details?id=az.cloudfetch">here</a></p>
<img alt="" src="/images/CloudFetch.png" />
<!-- Note : This app is free but unfortunately the code is no longer open source -->
</div>
<div class="section" id="windows">
<h2>Windows</h2>
<p>&quot;On my family's computer ?&quot;</p>
<div class="section" id="id1">
<h3>Installation</h3>
<p>So, you need the dokan library, it allows to run a FUSE filesystem on windows. Just download and install <a class="reference external" href="http://dokan-dev.net/en/download/">the dokan library</a>. Then there is an EncFS port named <strong>EncFS4win</strong> : download the <a class="reference external" href="http://members.ferrara.linux.it/freddy77/encfs.html">archive</a> and you can extract it anywhere you want (ex: <cite>C:Program Filesencfs</cite>).</p>
</div>
<div class="section" id="id2">
<h3>Usage</h3>
<p>To launch the GUI, just double click <cite>encfsw.exe</cite> and now you can easily manage your encrypted folders.</p>
<img alt="" src="/images/Encfs4win.png" />
<!-- Note for Win 8 users : you have to launch in compatibility mode (right clic -> propriety -> compatibility and set win 7) -->
</div>
</div>
<div class="section" id="os-x-lion">
<h2>Os X Lion</h2>
<p>I'm not a mac user but i found a solution for you on <a class="reference external" href="http://webdiary.com/2011/11/25/dropsec/">webdiary</a> : you have to download and install <a class="reference external" href="http://fuse4x.github.com/">Fuse4x</a> to support FUSE and the EncFS mac installer on <a class="reference external" href="http://www.lisanet.de/?p=128">lisanet</a>. Now you can use EncFS in command line.</p>
<p>If you want a GUI, just follow this quick <a class="reference external" href="http://www.alexwhittemore.com/encfs-on-lion-in-5-minutes/">howto</a> (you need to install homebrew)</p>
</div>
<div class="section" id="go-further">
<h2>Go Further</h2>
<div class="line-block">
<div class="line">EncFS official <a class="reference external" href="http://www.arg0.net/encfs">website</a></div>
<div class="line">EncFS on <a class="reference external" href="http://en.wikipedia.org/wiki/EncFS">wikipedia</a></div>
<div class="line">Very interesting EncFS <a class="reference external" href="http://www.ict.griffith.edu.au/anthony/info/crypto/encfs.hints">hints</a></div>
<div class="line">A pdf report from Fraunhofer institut : <a class="reference external" href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CD0QFjAA&amp;url=http%3A%2F%2Fwww.sit.fraunhofer.de%2Fcontent%2Fdam%2Fsit%2Fen%2Fstudies%2FCloud-Storage-Security_a4.pdf&amp;ei=nzf8UP62HdKIhQf6oIFw&amp;usg=AFQjCNGhymnIFCQOFJaXrWI8elG_3cirCA&amp;sig2=V_kMG85r96f2hxpX5s8bqw&amp;bvm=bv.41248874,d.ZG4">On the security of cloud storage services</a></div>
</div>
</div>


		<div id="article_meta">
				Category:
					<a href="http://natjohan.info/category/linux.html">Linux</a>
				<br />Tags:
					<a href="http://natjohan.info/tag/crypt.html">crypt</a>
					<a href="http://natjohan.info/tag/filesystem.html">filesystem</a>
					<a href="http://natjohan.info/tag/dropbox.html">dropbox</a>
					<a href="http://natjohan.info/tag/cloud.html">cloud</a>
					<a href="http://natjohan.info/tag/security.html">security</a>
					<a href="http://natjohan.info/tag/encfs.html">EncFS</a>
					<a href="http://natjohan.info/tag/data.html">data</a>
		</div>
		
		<div id="twitter">
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="natjohan">Tweet</a>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
		</div>

	</article>

	<footer>
		<a href="http://natjohan.info/" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;Back to blog</a>
	</footer>

	<div id="comments">
		<h2>Comments</h2>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
			var disqus_identifier = "encfs-simply-protect-and-access-to-your-private-data-on-cloud-services.html";
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'http://natjohan.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view <a href="http://disqus.com/?ref_noscript">comments</a>.</noscript>
	</div>

	</section>

<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		try {
			var pageTracker = _gat._getTracker("UA-37093039-1");
			pageTracker._trackPageview();
		} catch(err) {}</script>
</body>
</html>