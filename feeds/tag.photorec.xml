<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Natjohan</title><link href="http://natjohan.info/" rel="alternate"></link><link href="http://natjohan.info/feeds/tag.photorec.xml" rel="self"></link><id>http://natjohan.info/</id><updated>2013-01-28T13:42:00+01:00</updated><entry><title>Easily recover your data from corrupted usb disk/memory card</title><link href="http://natjohan.info/easily-recover-your-data-from-corrupted-usb-diskmemory-card.html" rel="alternate"></link><updated>2013-01-28T13:42:00+01:00</updated><author><name>natjohan</name></author><id>tag:natjohan.info,2013-01-28:easily-recover-your-data-from-corrupted-usb-diskmemory-card.html</id><summary type="html">&lt;p&gt;Yesterday, I just wanted to move my pictures from my memory card to my computer. Unfortunatly, my memory card doesn't mount automatically under linux (Fedora), so i tried to mount it manually&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="go"&gt;natjohan# fdisk -l&lt;/span&gt;
&lt;span class="go"&gt;[...]&lt;/span&gt;
&lt;span class="go"&gt;Périphérique Amorce  Début        Fin      Blocs     Id  Système&lt;/span&gt;
&lt;span class="go"&gt;/dev/sdc1            8192    15564799     7778304    b  W95 FAT32&lt;/span&gt;


&lt;span class="go"&gt;natjohan# mount -t vfat /dev/sdc1 /mnt/&lt;/span&gt;
&lt;span class="go"&gt;mount: mauvais type de système de fichiers, option erronée, superbloc&lt;/span&gt;
&lt;span class="go"&gt;        erroné sur /dev/sdc1, page de code ou aide manquante, ou autre erreur&lt;/span&gt;
&lt;span class="go"&gt;        Dans quelques cas certaines informations sont utiles dans le journal&lt;/span&gt;
&lt;span class="go"&gt;        système — essayez « dmesg | tail » ou quelque chose du genre&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Oooops, it doesn't works, what's in &lt;cite&gt;dmesg&lt;/cite&gt; ?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="go"&gt;natjohan# dmesg | tail&lt;/span&gt;
&lt;span class="go"&gt;[ 2571.223469] usb 2-1: new low-speed USB device number 2 using xhci_hcd&lt;/span&gt;
&lt;span class="go"&gt;[ 2571.269795] usb 2-1: New USB device found, idVendor=046d, idProduct=c01e&lt;/span&gt;
&lt;span class="go"&gt;[ 2571.269805] usb 2-1: New USB device strings: Mfr=1, Product=2, SerialNumber=0&lt;/span&gt;
&lt;span class="go"&gt;[ 2571.269810] usb 2-1: Product: USB-PS/2 Optical Mouse&lt;/span&gt;
&lt;span class="go"&gt;[ 2571.269815] usb 2-1: Manufacturer: Logitech&lt;/span&gt;
&lt;span class="go"&gt;[ 2571.271718] usb 2-1: ep 0x81 - rounding interval to 64 microframes, ep desc says 80 microframes&lt;/span&gt;
&lt;span class="go"&gt;[ 2571.289396] input: Logitech USB-PS/2 Optical Mouse as /devices/pci0000:00/0000:00:1c.4/0000:03:00.0/usb2/2-1/2-1:1.0/input/input11&lt;/span&gt;
&lt;span class="go"&gt;[ 2571.290150] hid-generic 0003:046D:C01E.0001: input,hidraw0: USB HID v1.10 Mouse [Logitech USB-PS/2 Optical Mouse] on usb-0000:03:00.0-1/input0&lt;/span&gt;
&lt;span class="go"&gt;[ 2677.921938] FAT-fs (sdc1): invalid media value (0x00)&lt;/span&gt;
&lt;span class="go"&gt;[ 2677.921944] FAT-fs (sdc1): Can&amp;#39;t find a valid FAT filesystem&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I was really annoyed (all my pictures from christmas :( , but with a quicksearch I found a very interesting tool called &lt;a class="reference external" href="http://www.cgsecurity.org/wiki/PhotoRec"&gt;photorec&lt;/a&gt; :&lt;/p&gt;
&lt;!--  --&gt;
&lt;blockquote&gt;
&lt;em&gt;PhotoRec is file data recovery software designed to&lt;/em&gt; &lt;strong&gt;recover lost files&lt;/strong&gt; &lt;em&gt;including video, documents and archives from hard disks, CD-ROMs, and lost pictures (thus the Photo Recovery name) from digital camera memory. PhotoRec ignores the file system and goes after the underlying data, so it will still work&lt;/em&gt; &lt;strong&gt;even if your media's file system has been severely damaged or reformatted.&lt;/strong&gt;&lt;/blockquote&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Moreover, &lt;cite&gt;Photorec&lt;/cite&gt; is :&lt;/div&gt;
&lt;div class="line"&gt;- free and open source (GPLV v2+)&lt;/div&gt;
&lt;div class="line"&gt;- developped by a french developper : Christian Grenier (thank you to him)&lt;/div&gt;
&lt;div class="line"&gt;- multi-platform (Linux, Win and OSX)&lt;/div&gt;
&lt;div class="line"&gt;- support most of filesystems : FAT, NTFS, Ext2/3/4, ExFAT, HFS+&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;What a promise ! So let's test it, under Fedora, there is a packet called &lt;cite&gt;testdisk&lt;/cite&gt; (&lt;a class="reference external" href="http://www.cgsecurity.org/wiki/TestDisk"&gt;testdisk&lt;/a&gt; is a suite which include photorec, note testdisk looks great too for recovering lost partition or boot sectors, hope I never need to use it)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="go"&gt;natjohan# yum install testdisk&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then, you just have to call &lt;cite&gt;photorec&lt;/cite&gt; and follow the instructions&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="go"&gt;natjohan# photorec&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Choose your storage device, your partition, folder for recovered files, etc. And take some time to drink a cup of coffee :)&lt;/p&gt;
&lt;img alt="photorec in progress" src="/images/photorec.png" /&gt;
&lt;p&gt;That's it ! Then you can format your device (in FAT 32 for example) with :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="go"&gt;natjohan# mkfs.vfat -cvF 32 /dev/sdc1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;WARNING :&lt;/strong&gt; Be really careful before formating a disk, &lt;strong&gt;you will not be able to recover your data&lt;/strong&gt;, check that you are applying the command to the right device before you hit ENTER&lt;/p&gt;
&lt;blockquote&gt;
Note: I supposed you have a partition created on the disk, before you format it.&lt;/blockquote&gt;
</summary><category term="tool"></category><category term="recover"></category><category term="photorec"></category><category term="repair"></category><category term="testdisk"></category></entry></feed>