<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="./theme/css/style.css">
	<!--<link rel="stylesheet/less" type="text/css" href="/theme/css/style.less">-->
	<!--<script src="/theme/js/less.js" type="text/javascript"></script>-->
	<link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="./theme/css/font-awesome.css" type="text/css"/>

	<link href="http://natjohan.info/" type="application/atom+xml" rel="alternate" title="Natjohan ATOM Feed" />
	

	
		<title> Tip of the week 13 | Natjohan </title>
		<meta charset="utf-8" />
	
</head>
<body>
	<section id="sidebar">
		<figure id="user_logo">
            <a href="."><div class="logo">&nbsp;</div></a>
		</figure>

		<div class="user_meta">
            <h1 id="user"><a href="." class="">Natjohan</a></h1>
			<h2>just some notes</h2>
			<ul>
				
				
					
						<li><a href="./category/dev.html">Dev</a></li>
					
						<li><a href="./category/linux.html">Linux</a></li>
					
						<li class="active"><a href="./category/totw.html">ToTW</a></li>
					
				
				
					<li><a href="/pages/about.html">About</a></li>
				
			</ul>
		</div>
		<footer>
			<div id="social" style="font-size: 20px;">
				
				  <script language="JavaScript">
				    u = "tcatnoc";
				    s = "ofni.nahojtan";
				    r_address = s + '@' + u
				    document.write('<a href=\"mailto:' + r_address.split("").reverse().join("") + '\" target=\"_blank\">');
				  </script>
				  <i class="icon-envelope icon-large"></i>
				  </a>
				
				
				  <a href="http://twitter.com/natjohan" target="_blank"> <i class="icon-twitter-sign icon-large"> </i> </a>
				
				
				
				  <a href="https://github.com/natjohan" target="_blank">  <i class="icon-github-sign icon-large"></i> </a>
				  
				
				  <a href="http://www.flickr.com/photos/joanhant/" target="_blank">  <i class="icon-camera icon-large"></i> </a>
				
				  <a href="./feeds/all.rss.xml" rel="alternate" title="Recent Blog Posts"> <i class="icon-rss icon-large"></i> </a>
			</div>
			<br>
			<address>
				Powered by <a href="http://pelican.notmyidea.org/">Pelican</a>,
		                theme by <a href="https://github.com/wting/pelican-svbtle">wting</a>.
			</address>
		</footer>
	</section>

	<section id="posts">
	
	
	<header>
		<h1>natjohan's blog</h1>
		<h3>Posted mar. 19 mars 2013</h3>
	</header>

	<article>
		<h1 id="title">
			<a href="./tip-of-the-week-13.html" rel="bookmark"
				title="Permalink to Tip of the week 13">Tip of the week 13</a>
		</h1>
		<div class="section" id="display-a-pre-and-after-login-message-in-your-terminal">
<h2>Display a pre and after login message in your terminal</h2>
<div class="section" id="pre-login-message">
<h3>pre login message</h3>
<p>With the file <cite>/etc/issue</cite>, you can personnalize the displayed message at your tty connection, just edit this file as root, exit your tty and reopen, tadaaaa :</p>
<div class="highlight"><pre><span class="gp">#</span><span class="c">###############################################################################</span>
<span class="gp">#</span> Warning ! This is a restricted area, access is reserved <span class="k">for </span>authorized users <span class="c">#</span>
<span class="gp">#</span> Unauthorized access may involve prosecution                                  <span class="c">#</span>
<span class="gp">#</span> Disconnect IMMEDIATELY <span class="k">if </span>you are not an authorized user!                    <span class="c">#</span>
<span class="gp">#</span><span class="c">###############################################################################</span>

<span class="go">user :</span>
</pre></div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<!--  -->
<blockquote>
<strong>Note :</strong> Obviously, for security reasons, you shouldn't put sensitive informations in this file (like OS version, password, etc), because you can show it even if you are not logged in</blockquote>
<p>You can can put escape sequence in your banner, you should find the different sequences with a <cite>man agetty</cite> (agetty usually analyze this file in many distros)</p>
<div class="highlight"><pre><span class="go"> The issue-file (/etc/issue or the file set with the -f option) may contain certain escape codes to display the system name, date and time etc. All escape codes consist of a backslash (\) immediately followed by one of the letters explained below.</span>

<span class="go">b      Insert the baudrate of the current line.</span>
<span class="go">d      Insert the current date.</span>
<span class="go">s      Insert the system name, the name of the operating system. Same as `uname -s&#39;.</span>
<span class="go">l      Insert the name of the current tty line.</span>
<span class="go">m      Insert the architecture identifier of the machine. Same as `uname -m&#39;.</span>
<span class="go">n      Insert the nodename of the machine, also known as the hostname. Same as `uname -n&#39;.</span>
<span class="go">o      Insert the NIS domainname of the machine. Same as `hostname -d&#39;.</span>
<span class="go">O      Insert the DNS domainname of the machine.</span>
<span class="go">r      Insert the release number of the OS. Same as `uname -r&#39;.</span>
<span class="go">t      Insert the current time.</span>
<span class="go">u      Insert the number of current users logged in.</span>
<span class="go">U      Insert the string &quot;1 user&quot; or &quot;&lt;n&gt; users&quot; where &lt;n&gt; is the number of current users logged in.</span>
<span class="go">v      Insert the version of the OS, eg. the build-date etc.</span>

<span class="go">Example: On my system, the following /etc/issue file:</span>
<span class="go">       This is \n.\o (\s \m \r) \t</span>
<span class="go">displays as</span>
<span class="go">       This is thingol.orcan.dk (Linux i386 1.1.9) 18:29:30</span>
</pre></div>
</div>
<div class="section" id="pre-login-message-and-open-ssh-server">
<h3>pre login message and open ssh server</h3>
<p>If you want to display a banner for your ssh server, you just have to edit the sshd configuration file located in /etc/ssh/sshd_config and add or uncomment the following line (you can choose another file of your choice like <cite>/etc/myissueforsshd</cite>)</p>
<div class="highlight"><pre><span class="go">banner /etc/issue</span>
</pre></div>
<p>Then restart your open ssh server :</p>
<div class="highlight"><pre><span class="go">natjohan# service sshd restart</span>
</pre></div>
</div>
<div class="section" id="after-login-message">
<h3>after login message</h3>
<p>You can put a message for logged users with <cite>/etc/motd</cite> file also called the &quot;Mot Of The Day&quot;.</p>
<!--  -->
<blockquote>
<strong>Note :</strong> Debian has a particular way to deal with motd, you just have to edit <cite>/etc/motd.tail</cite> if you want to keep you modifications, because <cite>/etc/motd</cite> is updated at each reboot (<a class="reference external" href="http://wiki.debian.org/motd">debian wiki</a>)</blockquote>
<p>Here is an example with the linux_logo command (just install it with a <cite>yum install linux_logo</cite> in Fedora) :</p>
<div class="highlight"><pre><span class="go">natjohan# linux_logo -F &quot;Fedora Linux 5.2\nKernel Version #V\n#U\n&quot; &gt; /etc/motd</span>
</pre></div>
<p>Here is the result :</p>
<div class="highlight"><pre><span class="go">                                                             #####</span>
<span class="go">                                                            #######</span>
<span class="go">               @                                            ##O#O##</span>
<span class="gp">#</span><span class="c">#####          @@#                                           #VVVVV#</span>
<span class="gp">#</span><span class="c">#             #                                          ##  VVV  ##</span>
<span class="gp">#</span><span class="c">#         @@@   ### ####   ###    ###  ##### ######     #          ##</span>
<span class="gp">#</span><span class="c">#        @  @#   ###    ##  ##     ##    ###  ##       #            ##</span>
<span class="gp">#</span><span class="c">#       @   @#   ##     ##  ##     ##      ###         #            ###</span>
<span class="gp">#</span><span class="c">#          @@#   ##     ##  ##     ##      ###        QQ#           ##Q</span>
<span class="gp">#</span><span class="c">#       # @@#    ##     ##  ##     ##     ## ##     QQQQQQ#       #QQQQQQ</span>
<span class="gp">#</span><span class="c">#      ## @@# #  ##     ##  ###   ###    ##   ##    QQQQQQQ#     #QQQQQQQ</span>
<span class="gp">#</span><span class="c">###########  ###  ####   ####   #### ### ##### ######   QQQQQ#######QQQQQ</span>

<span class="go">                            Fedora Linux 5.2</span>
<span class="go">                  Kernel Version 3.8.1-201.fc18.x86_64</span>
<span class="go">                       Uptime 2 hours 48 minutes</span>
</pre></div>
<p>If you want to know more about linux_logo command just RTFM !</p>
</div>
</div>
<div class="section" id="go-further">
<h2>Go further</h2>
<ul class="simple">
<li>Pimp your motd with <a class="reference external" href="https://github.com/iptoux/dyMotd">dynmotd</a> : a dynamic motd with colors !</li>
<li>A fancy motd <a class="reference external" href="http://www.raspberrypi.org/phpBB3/viewtopic.php?t=23440">example</a></li>
</ul>
</div>


		<div id="article_meta">
			
				Category:
					<a href="./category/totw.html">ToTW</a>
			
			
				<br />Tags:
				
					<a href="./tag/tip.html">tip</a>
				
					<a href="./tag/linux.html">linux</a>
				
					<a href="./tag/server.html">server</a>
				
					<a href="./tag/banner.html">banner</a>
				
			
		</div>
		
		
		<div id="twitter">
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="natjohan">Tweet</a>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
		</div>
		

	</article>

	<footer>
		<a href="./" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;Back to blog</a>
	</footer>

	
	<div id="comments">
		<h2>Comments</h2>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
			var disqus_identifier = "tip-of-the-week-13.html";
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'http://natjohan.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view <a href="http://disqus.com/?ref_noscript">comments</a>.</noscript>
	</div>
	


	</section>

	
<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		try {
			var pageTracker = _gat._getTracker("UA-37093039-1");
			pageTracker._trackPageview();
		} catch(err) {}</script>

</body>
</html>